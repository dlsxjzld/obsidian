
1. 브라우저는 HTML, CSS, 자바스크립트, 이미지, 폰트 파일 등 렌더링에 필요한 리소스를 요청하고 서버로부터 응답을 받습니다. 
2. 브라우저의 렌더링 엔진은 서버로부터 응답받은 HTML과 CSS를 파싱하여 DOM 트리와 CSSOM 트리를 생성하고 이 둘을 결합해서 렌더 트리를 생성합니다. 
3. 브라우저의 자바스크립트 엔진은 서버로부터 응답된 자바스크립트를 파싱하여 AST를 생성하고 바이트코드로 변환하여 실행합니다. 이때 자바스크립트는 DOM API를 통해 DOM이나 CSSOM을 변경할 수 있습니다. 변경된 DOM과 CSSOM은 렌더 트리로 결합됩니다.
4. 렌더 트리를 기반으로 HTML 요소의 레이아웃(위치와 크기)을 계산하고 브라우저 화면에 HTML 요소를 페인팅합니다.

	자바스크립트가 DOM, CSSOM을 변경하면 리렌더링을 하게 됩니다.
	리플로우, 리페인트가 있으며 리플로우가 발생하면 리페인트가 무조건 일어나게 됩니다.
	리플로우: 레이아웃 계산을 다시 하는 것
	리페인트: 재결합된 렌더 트리를 기반으로 다시 페인트를 하는 것

	 HTML 파싱 도중에 스크립트를 만나면 HTML 파싱이 중단되는 현상을 개선하기 위해 script태그에 async, defer 옵션이 추가되었습니다. 
	 async: HTML 파싱과 병렬적으로 스크립트 다운로드. 다운로드가 끝나면 HTML 파싱을 중지하고 자바스크립트 실행. 실행 순서가 보장되지 않음.
	 defer: HTML 파싱과 병렬적으로 스크립트 다운로드. HTML파싱이 끝난 이후에 자바스크립트 실행. 실행 순서가 보장됨.
	 
	 DOM을 따라 반드시 순서대로 실행되어야 한다면 body 태그 가장 밑에 script 태그 위치
	 DOM이나 다른 스크립트에 의존성이 없고, 실행 순서가 중요하지 않다면 async
	 DOM이나 다른 스크립트에 의존성이 있고, 실생 순서가 중요하다면 defer

간단한 요약
1. HTML를 파싱 후 DOM 트리 생성
	* 만약 HTML 중간에 스크립트가 있다면 HTML 파싱이 중단됩니다.
2. CSS를 파싱 후 CSSOM 트리 생성
3. DOM트리와 CSSOM 트리를 결합해서 렌더 트리를 생성
	* 만약 display:none 속성 같이 화면에서 보이지도 않고 공간도 차지하지 않는 것은 렌더 트리로 생성되지 않습니다.
4. 스크립트를 만나면 DOM생성이 중지되고 스크립트를 다운로드합니다.
5. 뷰포트 기반으로 렌더트리의 각 노드가 가지는 정확한 위치와 크기를 계산합니다 (레이아웃 단계)
6. 계산한 위치와 크기를 바탕으로 화면을 그립니다. (페인트 단계)

## 🛠️ 용어 공부
### ⚙️ 렌더링엔진
- 브라우저 마다 다르지만, 브라우저는 렌더링을 수행하는 렌더링 엔진을 가지고 있습니다. 크롬은 블링크(Blink), 사파리는 웹킷(Webkit) 그리고 파이어폭스는 게코(Gecko)라는 렌더링 엔진을 사용합니다.

### ⚙️ CRP
- CRP (Critical Rendering Path, 중요 렌더링 경로)는 브라우저가 HTML, CSS, Javascipt를 화면에 픽셀로 변화하는 일련의 단계를 말합니다. CRP는 Document Object Model (DOM), CSS Object Model (CSSOM), 렌더 트리 그리고 레이아웃을 포함합니다.

### ⚙️ 파싱
- 파싱은 하나의 프로그램을 런타임 환경(예를 들면, 브라우저 내 자바스크립트 엔진)이 실제로 실행할 수 있는 내부 포맷으로 분석하고 변환하는 것을 의미합니다. 즉, 파싱은 문서의 내용을 토큰(token)으로 분석하고, 문법적 의미와 구조를 반영한 파스 트리(parse tree)를 생성하는 과정입니다.

### ⚙️ DOM
- **DOM(Document Object Model)이란?** 웹 페이지를 이루는 태그들을 자바스크립트가 이용할 수 있게끔 브라우저가 트리구조로 만든 객체 모델을 의미합니다. 영어 뜻풀이 그대로 하자면 문서 객체 모델을 의미합니다. 문서 객체란 html, head, body와 같은 태그들을 javascript가 이용할 수 있는 (메모리에 보관할 수 있는) 객체를 의미합니다. DOM은 HTML과 스크립팅 언어(JavaScript)를 서로 이어주는 역할을 합니다.

### ⚙️ CSSOM
- **CSSOM(CSS Object Model)이란?** CSS 내용을 파싱하여 자료를 구조화 한 것을 CSSOM이라고 합니다. 즉 DOM처럼 CSS의 내용을 해석하고 노드를 만들어 트리 구조로 만든 것을 CSSOM이라 합니다.

### ⚙️ 렌더트리
- **렌더트리(Render Tree)란?** 렌더 트리는 CSSOM과 DOM 트리의 결합으로 만들어집니다. 렌더 트리는 웹 페이지에 나타낼 각 요소들의 위치(Layout, 레이아웃)을 계산하는데 사용되고 픽셀을 화면에 렌더링하는 페인트(Paint) 즉 화면에 요소들을 표현하는 프로세스를 위해 존재합니다.

### ⚙️ Layout
- **Layout(Reflow)이란?** 뷰포트 내에서 노드의 정확한 위치와 크기를 계산합니다. 이것이 바로 'Layout' 단계이며 경우에 따라 'Reflow' 라고도 합니다.

### ⚙️ Paint
- **Paint란?** 노드와 해당 노드의 계산된 스타일 및 기하학적 형태에 대해 파악했으므로, 렌더링 트리의 각 노드를 화면의 실제 픽셀로 변환하는 마지막 단계에 이러한 정보를 전달합니다. 이 단계를 흔히 '페인팅' 또는 '래스터화'라고 합니다.


### 참고자료
[브라우저는 어떻게 동작하는가?](https://d2.naver.com/helloworld/59361)
[브라우저 렌더링 _ 프론트엔드 인터뷰 github](https://github.com/Esoolgnah/Frontend-Interview-Questions/blob/main/Notes/important-5/browser-rendering.md)
[브라우저 렌더링 _ velog](https://velog.io/@wkahd01/%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%A9%B4%EC%A0%91-%EB%AC%B8%EC%A0%9C-%EC%9D%80%ED%96%89-HTML-%EC%A7%88%EB%AC%B8-%EB%8B%B5%EB%B3%80#%ED%99%88%ED%8E%98%EC%9D%B4%EC%A7%80%EA%B0%80-%EC%82%AC%EC%9A%A9%EC%9E%90%EC%97%90%EA%B2%8C-%EB%B3%B4%EC%9D%B4%EB%8A%94-%EC%88%9C%EC%84%9C%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EB%A0%8C%EB%8D%94%EB%A7%81-%EA%B3%BC%EC%A0%95)
[async,defer](https://wormwlrm.github.io/2021/03/01/Async-Defer-Attributes-of-Script-Tag.html)